(this["webpackJsonpbook-search-library"]=this["webpackJsonpbook-search-library"]||[]).push([[0],{24:function(t,e,r){},26:function(t,e,r){},27:function(t,e,r){},29:function(t,e,r){},48:function(t,e,r){},49:function(t,e,r){"use strict";r.r(e);var a=r(2),n=r.n(a),s=r(15),c=r.n(s),i=(r(24),r(3)),l=r.n(i),o=r(4),u=r(16),h=r(17),d=r(19),b=r(18),j=(r(26),r(27),r(0)),p=function(t){return Object(j.jsx)("div",{className:"search-wrapper ".concat(t.loading?"active":""," ").concat(t.searchData?"auto-height":""),children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.handleSubmit()},children:[Object(j.jsx)("input",{id:"titleInput",type:"text","aria-label":"Search","aria-required":"true",name:"title",ref:t.textInput,className:"search-field",onFocus:function(e){console.log("handleFocus hitttttttttttttt"),t.handleFocus("focus")},onBlur:function(e){console.log("handleBlur hitttttttttttttt"),t.handleFocus("blur")},required:!0}),Object(j.jsx)("label",{htmlFor:"titleInput",className:" ".concat(t.isFocused?"hide-label":"")}),Object(j.jsx)("input",{type:"submit",value:"Submit","aria-label":"Submit"})]})})},f=(r(29),r(5)),x=r.n(f),v=function(t){var e=function(){var t=Object(o.a)(l.a.mark((function t(e){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="#",!e){t.next=6;break}return t.next=4,x.a.get("http://covers.openlibrary.org/b/isbn/".concat(e,"-M.jpg"));case 4:r=(r=t.sent).config.url;case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"card-wrapper",children:t.data?t.data.map((function(t,r){var a=t.hasOwnProperty("isbn");a=a?t.isbn[0]:"";var n,s=e(a).then((function(e){return{id:t._version_,title:t.title,year:t.first_publish_year,url:e}})),c=t.hasOwnProperty("first_publish_year")?t.first_publish_year:0,i=t.hasOwnProperty("author_name")?t.author_name[0]:"N/A";return s.then((function(t){return n="val.url"})),console.log("val.url----------------",n),Object(j.jsxs)("div",{className:"card-details",children:[Object(j.jsx)("div",{className:"card-image"}),Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"Title:"})," ",t.title," "]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"Year:"})," ",c]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"Author:"})," ",i]}),Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"URL:"}),n]})]})]},t._version_)})):"No Data"})},O=(r(48),function(t){var e=t.handleFilter,r=t.title,a=t.sortByTitle,n=t.sortByYear;return Object(j.jsx)("li",{className:"filter-btn ".concat(a?"active":""," ").concat(n?"active":""),onClick:function(){e("Sort Alphabetical"==r?"title":"year")},children:r})}),y=function(t){Object(d.a)(r,t);var e=Object(b.a)(r);function r(t){var a;return Object(u.a)(this,r),(a=e.call(this,t)).handleSubmit=Object(o.a)(l.a.mark((function t(){var e,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.textInput.current.value&&a.setState({loading:!0}),e=a.textInput.current.value.split(" ").join("+"),t.prev=2,!e){t.next=9;break}return t.next=6,x.a.get("https://openlibrary.org/search.json?q=".concat(e));case 6:r=t.sent,console.log("res-----------------------",r),a.setState({loading:!1,searchData:r.data.docs});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log("error----",t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,11]])}))),a.handleFilter=function(t){if(a.state.sortByTitle||"title"!=t){if(!a.state.sortByYear&&"year"==t){a.state.searchData.sort((function(t,e){var r=void 0!==t.first_publish_year?t.first_publish_year:0,a=void 0!==e.first_publish_year?e.first_publish_year:0;return r<a?1:r>a?-1:0}));a.setState({sortByTitle:!1,sortByYear:!0})}}else{a.state.searchData.sort((function(t,e){var r=t.title.toUpperCase(),a=e.title.toUpperCase();return r<a?-1:r>a?1:0}));a.setState({sortByTitle:!0,sortByYear:!1})}},a.handleFocus=function(t){a.textInput.current.value&&("focus"==t?a.setState({isFocused:!1}):a.setState({isFocused:!0}))},a.state={searchData:null,sortByTitle:!1,sortByYear:!1,loading:!1,isFocused:!1},a.textInput=n.a.createRef(),a}return Object(h.a)(r,[{key:"render",value:function(){var t=this;return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(p,{handleSubmit:function(){return t.handleSubmit()},textInput:this.textInput,loading:this.state.loading,isFocused:this.state.isFocused,searchData:this.state.searchData,handleFocus:function(e){return t.handleFocus(e)}}),this.state.loading?Object(j.jsx)("p",{children:"Fetching Data..."}):"",this.state.searchData?Object(j.jsxs)(a.Fragment,{children:[Object(j.jsxs)("ul",{className:"filter-wrapper",children:[Object(j.jsx)(O,{handleFilter:function(e){return t.handleFilter(e)},title:"Sort Alphabetical",sortByTitle:this.state.sortByTitle}),Object(j.jsx)(O,{handleFilter:function(e){return t.handleFilter(e)},title:"Most Recently Published",sortByYear:this.state.sortByYear})]}),Object(j.jsx)(v,{data:this.state.searchData})]}):""]})}}]),r}(a.Component);c.a.render(Object(j.jsxs)(n.a.StrictMode,{children:[Object(j.jsx)("h1",{children:Object(j.jsx)("a",{href:"/",children:"Book Search Library"})}),Object(j.jsx)(y,{})]}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.8a9518b2.chunk.js.map